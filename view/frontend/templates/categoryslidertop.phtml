<style>

    .autoplaytop .imageslider {
        height: <?= $block->getSizeOfCategorySlider('height',array(0,2)) ?>px !important;
        margin: auto;
        width: <?= $block->getSizeOfCategorySlider('height',array(0,2)) ?>px !important;
        object-fit: cover;
    }

    .autoplayfooter .imageslider {
        height: <?= $block->getSizeOfCategorySlider('height',array(1,2)) ?>px !important;
        margin: auto;
        width: <?= $block->getSizeOfCategorySlider('height',array(1,2)) ?>px !important;
        object-fit: cover;
    }

    .autoplaytop {
        display: none;
        width: <?= $block->getSizeOfCategorySlider('width',array(0,2)) ?>% !important;
        margin: 0 auto;
    }

    .autoplayfooter {

        width: <?= $block->getSizeOfCategorySlider('width',array(1,2)) ?>% !important;
        margin: 0 auto;
    }

    .gallery-title{
        text-align: center;
    }

    .page-bottom{
        width: 100% !important;
    }
</style>

<?php if (!empty($block->getListImageCategory(array(0,2)))): ?>
    <div class="gallery-title"><h2><span style="font-weight: bold"><?= $block->getGalleryTitleCategory(array(0,2)) ?></span></h2></div>
    <div class="slider autoplaytop">
        <?php foreach ($block->getListImageCategory(array(0,2)) as $image): ?>
            <div class="image-item">
                <img
                        alt=""
                        class="imageslider"
                        src="<?php echo $block->getMediaUrl() . $block->loadImage($image)->getData('image'); ?>"/>
                <input class="image_id" type="hidden" value="<?= $block->loadImage($image)->getData('image_id'); ?>">
                <input class="position_slider" type="hidden" value="top">
            </div>
        <?php endforeach; ?>
    </div>
<?php endif; ?>

<style>
    #popup-modal{
        display: none;
    }
    .popup-image-current{
        width: 500px;
        height: 400px;
    }
    .image-slide-show
    {
        width: 50px;
        height: 50px;
    }
    .border-for-image
    {
        border: solid 2px red !important;
    }
</style>

<div id="popup-modal">
    <div id="popup-modal-main">
        <div class="popup-image_url">
            <button class="previous-button btn-control-slide">
                <img src="<?php echo $this->getViewFileUrl('Magenest_ImageGallery::images/back.svg'); ?>" alt="Arrow Left"/>
            </button>
            <img class="popup-image-current" src="" alt="Image-Gallery"/>
            <button class="next-button btn-control-slide">
                <img src="<?php echo $this->getViewFileUrl('Magenest_ImageGallery::images/next.svg'); ?>" alt="Arrow Left"/>
            </button>
        </div>

        <div class="main-content-gallery">
            <div class="headding-title">
                <div class="content-primary">
                    <div class="popup-image-title">
                        <h2><span style="font-weight: bold" class="image-title"></span></h2>
                    </div>

                    <div class="content-secondary">
                        <div class="popup-socical-share">
                            <i class="popup-facebook-share">
                                <img src="<?php echo $this->getViewFileUrl('Magenest_ImageGallery::images/facebook-svg.svg'); ?>" alt="Social icon"/>
                            </i>
                            <i class="popup-pinterest-share">
                                <img src="<?php echo $this->getViewFileUrl('Magenest_ImageGallery::images/pinterest-svg.svg'); ?>" alt="Social icon"/>
                            </i>
                            <i class="popup-twitter-share">
                                <img src="<?php echo $this->getViewFileUrl('Magenest_ImageGallery::images/twitter-svg.svg'); ?>" alt="Social icon"/>
                            </i>
                        </div>
                    </div>

                    <div class="popup-view-product">
                        <a class="popup-link-product">View Product</a>
                    </div>
                </div>

                <div class="content-secondary">
                    <div class="popup-socical-share">
                        <i class="popup-facebook-share">
                            <img src="<?php echo $this->getViewFileUrl('Magenest_ImageGallery::images/facebook-svg.svg'); ?>" alt="Social icon"/>
                        </i>
                        <i class="popup-pinterest-share">
                            <img src="<?php echo $this->getViewFileUrl('Magenest_ImageGallery::images/pinterest-svg.svg'); ?>" alt="Social icon"/>
                        </i>
                        <i class="popup-twitter-share">
                            <img src="<?php echo $this->getViewFileUrl('Magenest_ImageGallery::images/twitter-svg.svg'); ?>" alt="Social icon"/>
                        </i>
                    </div>
                </div>
            </div>

            <div class="popup-image-description">
                <span class="image-description"></span>
            </div>

            <div class="popup-love">
                <i class="fa fa-heart popup-love-icon"></i>
                <span style="font-weight: bold" class="popup-love-number"></span>
                <span style="font-weight: bold" class="popup-word"> likes</span>
            </div>
        </div>
    </div>

    <div class="popup-index-image"><span class="current-index"></span>/<span class="total-images"></span> images</div>


    <div class="popup-small-slideshow">
        <div class="previous-button-slideshow btn-control-images">
            <button class="previous-slide">
                <img src="<?php echo $this->getViewFileUrl('Magenest_ImageGallery::images/back.svg'); ?>" alt="Arrow Left"/>
            </button>
        </div>
        <div class="thumbnail-image-container">
            <img id="slideshow0" class="image-slide-show" alt="" src=""/>
            <img id="slideshow1" class="image-slide-show" alt="" src=""/>
            <img id="slideshow2" class="image-slide-show" alt="" src=""/>
            <img id="slideshow3" class="image-slide-show" alt="" src=""/>
            <img id="slideshow4" class="image-slide-show" alt="" src=""/>
            <img id="slideshow5" class="image-slide-show" alt="" src=""/>
            <img id="slideshow6" class="image-slide-show" alt="" src=""/>
            <img id="slideshow7" class="image-slide-show" alt="" src=""/>
            <img id="slideshow8" class="image-slide-show" alt="" src=""/>
        </div>
        <div class="next-button-slideshow btn-control-images">
            <button class="next-slide">
                <img src="<?php echo $this->getViewFileUrl('Magenest_ImageGallery::images/next.svg'); ?>" alt="Arrow Right"/>
            </button>
        </div>
    </div>


    <input class="popup-image_id" type="hidden" value="">
    <input class="popup-product_id" type="hidden" value="">
</div>

<script>
    require([
            'jquery',
            'Magenest_ImageGallery/js/view/slick'
        ], function ($) {
            $(document).ready(function () {
                $('.autoplaytop').show();
                $('.autoplayfooter').show();
            });

            $('.autoplaytop').slick({
                slidesToShow: <?= $block->getNumberImageSliderCategory(array(0,2)) ?>,
                slidesToScroll: 1,
                autoplay: true,
                autoplaySpeed: 2000,
                infinite: true,
                draggable: false,
                adaptiveHeight: true,
                prevArrow: "<img class='slick-prev' src=\"<?php echo $this->getViewFileUrl('Magenest_ImageGallery::images/back.svg'); ?>\" alt=\"Arrow Left\"/>",
                nextArrow: "<img class='slick-next' src=\"<?php echo $this->getViewFileUrl('Magenest_ImageGallery::images/next.svg'); ?>\" alt=\"Arrow Right\"/>",
                responsive: [
                    {
                        breakpoint: 1024,
                        settings: {
                            slidesToShow: 3,
                            slidesToScroll: 1,
                            infinite: true
                        }
                    },
                    {
                        breakpoint: 600,
                        settings: {
                            slidesToShow: 2,
                            slidesToScroll: 1,
                        }
                    },
                    {
                        breakpoint: 480,
                        settings: {
                            slidesToShow: 1,
                            slidesToScroll: 1,
                        }
                    }
                ]
            });

            $('.autoplayfooter').slick({
                slidesToShow: <?= $block->getNumberImageSliderCategory(array(1,2)) ?>,
                slidesToScroll: 1,
                autoplay: true,
                autoplaySpeed: 2000,
                infinite: true,
                draggable: false,
                adaptiveHeight: true,
                prevArrow: "<img class='slick-prev' src=\"<?php echo $this->getViewFileUrl('Magenest_ImageGallery::images/back.svg'); ?>\" alt=\"Arrow Left\"/>",
                nextArrow: "<img class='slick-next' src=\"<?php echo $this->getViewFileUrl('Magenest_ImageGallery::images/next.svg'); ?>\" alt=\"Arrow Right\"/>",
                responsive: [
                    {
                        breakpoint: 1024,
                        settings: {
                            slidesToShow: 3,
                            slidesToScroll: 1,
                            infinite: true
                        }
                    },
                    {
                        breakpoint: 600,
                        settings: {
                            slidesToShow: 2,
                            slidesToScroll: 1,
                        }
                    },
                    {
                        breakpoint: 480,
                        settings: {
                            slidesToShow: 1,
                            slidesToScroll: 1,
                        }
                    }
                ]
            });
        }
    );
</script>

<script type="text/x-magento-init">
    {
        "*": {
            "Magenest_ImageGallery/js/view/light-box": {
                "list_image_popup_top" : <?= json_encode($block->getListImageCategoryCollection('top')) ?>,
                "list_image_popup_footer" : <?= json_encode($block->getListImageCategoryCollection('footer')) ?>,
                "mediaUrl" : "<?= $block->getMediaUrl() ?>",
                "urlKey" : "<?= $block->getUrlKey() ?>",
                "loveUrl" : "<?php echo $block->getUrl('imagegallery/gallery/love'); ?>",
                "gallery_id_category_top" : "<?= $block->getGalleryIdCategory(array(0,2)) ?>",
                "gallery_id_category_footer" : "<?= $block->getGalleryIdCategory(array(1,2)) ?>",
                "magento_version" : "<?= $block->getMagentoVersion() ?>",
                "checkLogin" : <?= $block->checkLogin() ?>
            }
        }
    }
</script>
